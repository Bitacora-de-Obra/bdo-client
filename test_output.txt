
> bdo-appd@0.0.0 test
> vitest --run src/test/consistency/MEVEntry.test.tsx


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90m/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client[39m

[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[90mstdout[2m | src/test/consistency/MEVEntry.test.tsx[2m > [22m[2mMEV Entry Consistency[2m > [22m[2mshould SHOW MEV novelties and observations
[22m[39mDEBUG JSON entry: {"id":"entry-mev-123","folioNumber":5,"type":"MEV","status":"Listo para firmas","createdAt":"2026-01-21T14:20:40.079Z","updatedAt":"2026-01-21T14:20:40.079Z","entryDate":"2026-01-21T14:20:40.079Z","author":{"id":"author-123","fullName":"Author Name","projectRole":"Contratista","avatarUrl":""},"mevNovelties":"Novedades de maquinaria: Excavadora en mantenimiento","description":"MEV Daily Description","mevContractorResponse":"MEV Contractor Obs","mevFindings":"MEV Interventoria Obs","additionalObservations":"MEV Additional Obs","reviewTasks":[],"signatureTasks":[]}
DEBUG JSON initialContractorResponses: {"contractorObservations":"","safetyContractorResponse":"","environmentContractorResponse":"","socialContractorResponse":"","mevContractorResponse":"MEV Contractor Obs"}
[DETAIL DEBUG] type from entry: MEV
[DETAIL DEBUG] entryTypeValue (normalized): MEV
[DETAIL DEBUG] EntryType.SAFETY: SAFETY
[DETAIL DEBUG] isSpecialType: [33mtrue[39m
[DETAIL DEBUG] showSafetyPanel: [33mfalse[39m
[DETAIL DEBUG] safetyNotes: []
DEBUG JSON entry: {"id":"entry-mev-123","folioNumber":5,"type":"MEV","status":"Listo para firmas","createdAt":"2026-01-21T14:20:40.079Z","updatedAt":"2026-01-21T14:20:40.079Z","entryDate":"2026-01-21T14:20:40.079Z","author":{"id":"author-123","fullName":"Author Name","projectRole":"Contratista","avatarUrl":""},"mevNovelties":"Novedades de maquinaria: Excavadora en mantenimiento","description":"MEV Daily Description","mevContractorResponse":"MEV Contractor Obs","mevFindings":"MEV Interventoria Obs","additionalObservations":"MEV Additional Obs","reviewTasks":[],"signatureTasks":[]}
DEBUG JSON initialContractorResponses: {"contractorObservations":"","safetyContractorResponse":"","environmentContractorResponse":"","socialContractorResponse":"","mevContractorResponse":"MEV Contractor Obs"}
[DETAIL DEBUG] type from entry: MEV
[DETAIL DEBUG] entryTypeValue (normalized): MEV
[DETAIL DEBUG] EntryType.SAFETY: SAFETY
[DETAIL DEBUG] isSpecialType: [33mtrue[39m
[DETAIL DEBUG] showSafetyPanel: [33mfalse[39m
[DETAIL DEBUG] safetyNotes: []

[90mstderr[2m | src/test/consistency/MEVEntry.test.tsx[2m > [22m[2mMEV Entry Consistency[2m > [22m[2mshould SHOW MEV novelties and observations
[22m[39mNo se pudo verificar la firma del usuario. TypeError: Cannot read properties of undefined (reading 'get')
    at [90m/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mcomponents/EntryDetailModal.tsx:503:52
    at [90m/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mcomponents/EntryDetailModal.tsx:509:7
    at commitHookEffectListMount [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m
    at [90m/Users/mcarenas136/Desktop/Trabajo/Bitacora/bdo-client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:26808:9

 [31m‚ùØ[39m src/test/consistency/MEVEntry.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 230[2mms[22m[39m
[31m     [31m√ó[31m should SHOW MEV novelties and observations[39m[32m 229[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 1 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/test/consistency/MEVEntry.test.tsx[2m > [22mMEV Entry Consistency[2m > [22mshould SHOW MEV novelties and observations
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /MEV Contractor Obs/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
  [36m<div[39m
    [33maria-labelledby[39m=[32m"modal-title"[39m
    [33maria-modal[39m=[32m"true"[39m
    [33mclass[39m=[32m"fixed inset-0 z-[9999] flex items-center justify-center"[39m
    [33mrole[39m=[32m"dialog"[39m
  [36m>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-gray-500 bg-opacity-75"[39m
    [36m/>[39m
    [36m<div[39m
      [33mclass[39m=[32m"relative z-[10000] w-full max-w-5xl mx-4 sm:mx-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white rounded-lg shadow-xl overflow-hidden"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex justify-between items-center p-4 border-b"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
            [33mid[39m=[32m"modal-title"[39m
          [36m>[39m
            [0mDetalle Anotaci√≥n - Folio #5[0m
          [36m</h3>[39m
          [36m<button[39m
            [33mclass[39m=[32m"text-gray-400 hover:text-gray-600 focus:outline-none"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"sr-only"[39m
            [36m>[39m
              [0mClose[0m
            [36m</span>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"h-6 w-6"[39m
              [33mfill[39m=[32m"none"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M6 18L18 6M6 6l12 12"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
              [36m/>[39m
            [36m</svg>[39m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 max-h-[80vh] overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"pb-4 border-b"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-start"[39m
              [36m>[39m
                [36m<h3[39m
                  [33mclass[39m=[32m"text-xl font-bold text-gray-900 flex items-center gap-2"[39m
                [36m>[39m
                  [0m [0m
                [36m</h3>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mt-2 flex justify-between items-center"[39m
              [36m>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mMEV[0m
                [36m</p>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-status-green/10 text-status-green border border-status-green/20"[39m
                  [36m>[39m
                    [0mListo para firmas[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs text-gray-500"[39m
                  [36m>[39m
                    [0m(No editable, no eres el autor)[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border border-gray-200 rounded-lg p-4 space-y-4 shadow-sm bg-white"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h4[39m
                  [33mclass[39m=[32m"text-md font-semibold text-gray-800"[39m
                [36m>[39m
                  [0mMaquinaria y Equipos (MEV)[0m
                [36m</h4>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500"[39m
                [36m>[39m
                  [0mReporte de novedades.[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm font-semibold text-gray-700"[39m
                [36m>[39m
                  [0mNovedades registradas[0m
                [36m</p>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-800"[39m
                [36m>[39m
                  [0mNovedades de maquinaria: Excavadora en mantenimiento[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm font-semibold text-gray-700"[39m
                [36m>[39m
                  [0mObservaciones de la interventor√≠a[0m
                [36m</p>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"mt-2 text-sm text-gray-700 whitespace-pre-wrap"[39m
                [36m>[39m
                  [0mMEV Interventoria Obs[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm font-semibold text-gray-700"[39m
                [36m>[39m
                  [0mRespuesta del contratista[0m
                [36m</p>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"mt-2 text-sm text-gray-700 whitespace-pre-wrap"[39m
                [36m>[39m
                  [0mSin respuesta registrada.[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 border border-blue-200 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-900 mb-2"[39m
              [36m>[39m
                [0mEstado y Acciones Disponibles[0m
              [36m</h4>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-blue-800 space-y-2"[39m
              [36m>[39m
                [36m<p>[39m
                  [0m‚úçÔ∏è [0m
                  [36m<strong>[39m
                    [0mListo para firmas:[0m
                  [36m</strong>[39m
                  [0m los firmantes asignados pueden proceder a firmar.[0m
                [36m</p>[39m
                [36m<p>[39m
           ...
[90m [2m‚ùØ[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m src/test/consistency/MEVEntry.test.tsx:[2m88:23[22m[39m
    [90m 86| [39m        
    [90m 87| [39m        [90m// Assert Observations[39m
    [90m 88| [39m        expect(screen.getByText(/MEV Contractor Obs/)).toBeInTheDocume‚Ä¶
    [90m   | [39m                      [31m^[39m
    [90m 89| [39m        expect(screen.getByText(/MEV Interventoria Obs/)).toBeInTheDoc‚Ä¶
    [90m 90| [39m        expect(screen.getByText(/MEV Additional Obs/)).toBeInTheDocume‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/1]‚éØ[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m   Start at [22m 15:20:34
[2m   Duration [22m 6.26s[2m (transform 891ms, setup 1.08s, import 596ms, tests 230ms, environment 4.16s)[22m

